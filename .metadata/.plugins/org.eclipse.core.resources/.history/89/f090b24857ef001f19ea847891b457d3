package com.servlet;

import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import jakarta.servlet.http.HttpSession;

import java.io.IOException;


@WebServlet("/SessionTarack")
public class SessionTarack extends HttpServlet {
	private static final long serialVersionUID = 1L;


	protected void doGet(HttpServletRequest request, HttpServletResponse response) 
			throws ServletException, IOException {

		// Create a session object if it is already not  created.
		HttpSession session = request.getSession(true);
		
		Date createTime  = new Date(session.getCreationTime());
		
		Date lastAccessTime = new Date(session.getLastAccessedTime());
		
		String title = "Welcome Back to a website";
		Integer visitCount  = new Integer(0);
		String visitCountKey = new String("visitCount");
		String userIdKey = new String ("usetId");
		String userId  = new String("ABCD");
		
		
		if (session.isNew()) {
			title = "Welcome to a website";
			session.setAttribute(userIdKey, userId);
		} else {
			visitCount =(Integer)session.getAttribute(visitCountKey);
			visitCount = visitCount + 1;
			userId = (String)session.getAttribute(userIdKey);
		}
		
		session.setAttribute(visitCountKey, visitCount);
	}

}
